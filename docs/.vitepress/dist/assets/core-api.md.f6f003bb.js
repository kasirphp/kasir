import{_ as a,c as s,o as n,b as e}from"./app.5af47248.js";const h=JSON.parse('{"title":"Core API","description":"","frontmatter":{"title":"Core API"},"headers":[{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[]},{"level":2,"title":"Charge Transaction","slug":"charge-transaction","link":"#charge-transaction","children":[]},{"level":2,"title":"Capture a Credit Card or GoPay Transaction","slug":"capture-a-credit-card-or-gopay-transaction","link":"#capture-a-credit-card-or-gopay-transaction","children":[]},{"level":2,"title":"Approve and Deny a Credit Card Transaction","slug":"approve-and-deny-a-credit-card-transaction","link":"#approve-and-deny-a-credit-card-transaction","children":[]},{"level":2,"title":"Cancel a Transaction","slug":"cancel-a-transaction","link":"#cancel-a-transaction","children":[]},{"level":2,"title":"Expire a Transaction","slug":"expire-a-transaction","link":"#expire-a-transaction","children":[]},{"level":2,"title":"Refund a Transaction","slug":"refund-a-transaction","link":"#refund-a-transaction","children":[]},{"level":2,"title":"Direct Refund a Transaction","slug":"direct-refund-a-transaction","link":"#direct-refund-a-transaction","children":[]},{"level":2,"title":"Get Transaction Status","slug":"get-transaction-status","link":"#get-transaction-status","children":[]}],"relativePath":"core-api.md"}'),t={name:"core-api.md"},o=e(`<ul><li><a href="#getting-started">Getting Started</a></li><li><a href="#charge-transaction">Charge Transaction</a></li><li><a href="#capture-a-credit-card-or-gopay-transaction">Capture a Credit Card or GoPay Transaction</a></li><li><a href="#approve-and-deny-a-credit-card-transaction">Approve and Deny a Credit Card Transaction</a></li><li><a href="#cancel-a-transaction">Cancel a Transaction</a></li><li><a href="#expire-a-transaction">Expire a Transaction</a></li><li><a href="#refund-a-transaction">Refund a Transaction</a></li><li><a href="#direct-refund-a-transaction">Direct Refund a Transaction</a></li><li><a href="#get-transaction-status">Get Transaction Status</a></li></ul><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><p>Payment API is intended for performing transactions and deduct funds from the customer, depending on the payment method selected. You can charge, tokenize credit card, approve, deny, refund, or cancel a transactions.</p><p>Every method in this page will return a <code>MidtransResponse</code> instance, which inherits from Laravel <code>Response</code> class with additional features and methods.</p><blockquote><p>Before you start using this API, you need to configure the <a href="./payment-methods.html">Payment Methods</a>. You may also need to configure the <a href="./transaction-details.html">Transaction Details</a>.</p></blockquote><h2 id="charge-transaction" tabindex="-1">Charge Transaction <a class="header-anchor" href="#charge-transaction" aria-hidden="true">#</a></h2><p>To perform a transaction with various available payment methods and features, you can use <code>-&gt;charge()</code> method. This will return a <code>MidtransResponse</code> instance.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// use Kasir\\Kasir\\Kasir;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">qris</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// or any payment method you choose.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">charge</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="capture-a-credit-card-or-gopay-transaction" tabindex="-1">Capture a Credit Card or GoPay Transaction <a class="header-anchor" href="#capture-a-credit-card-or-gopay-transaction" aria-hidden="true">#</a></h2><p>To capture a credit card or GoPay transaction, you can use <code>capture()</code> static method. This method receives a <code>MidtransResponse</code> instance. Capture transaction is triggered to capture the transaction balance when <code>&#39;transaction_status&#39; =&gt; &#39;authorize&#39;</code>.</p><p>This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID as its parameter. You can use <code>Kasir::capture()</code> method to capture a transaction.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">creditCard</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">CreditCard</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">card_number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_exp_month</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_exp_year</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_cvv</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">charge</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">captured_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">capture</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>You can also capture a transaction using <code>MidtransResponse</code> instance.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">captured_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">capture</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="approve-and-deny-a-credit-card-transaction" tabindex="-1">Approve and Deny a Credit Card Transaction <a class="header-anchor" href="#approve-and-deny-a-credit-card-transaction" aria-hidden="true">#</a></h2><p>When you charge using, there is a chance for the credit card number to be challenged by Fraud Detection System (FDS). In this case, the transaction will be put on hold, and you will need to approve or deny the transaction.</p><p>To approve a challenged credit card transaction, you can use <code>approve()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">approved_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">approve</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">approved_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">approve</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><p>To deny a challenged credit card transaction, you can use <code>deny()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">denied_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">deny</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">denied_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">deny</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="cancel-a-transaction" tabindex="-1">Cancel a Transaction <a class="header-anchor" href="#cancel-a-transaction" aria-hidden="true">#</a></h2><p>Cancel transaction is triggered to void the transaction. If transaction is already settled (<code>&#39;status&#39; =&gt; &#39;settlement</code>) you should perform <a href="#refunding-a-transaction">refund</a> instead if the payment method supports it.</p><p>To cancel a transaction, you can use <code>cancel()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">canceled_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">cancel</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">canceled_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">cancel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="expire-a-transaction" tabindex="-1">Expire a Transaction <a class="header-anchor" href="#expire-a-transaction" aria-hidden="true">#</a></h2><p>Expire transaction is triggered to update the <code>transaction_status</code> to <code>expire</code>, when the customer fails to complete the payment. The expired <code>order_id</code> can be reused for the same or different payment methods.</p><p>To expire a transaction, you can use <code>expire()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">expired_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">expire</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">expired_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">expire</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="refund-a-transaction" tabindex="-1">Refund a Transaction <a class="header-anchor" href="#refund-a-transaction" aria-hidden="true">#</a></h2><p>Refund transaction is called to reverse the money back to customers for transactions with payment status <code>settlement</code>. If transaction&#39;s status is still Pending Authorize or Capture please use <a href="#canceling-a-transaction"><code>cancel</code></a> instead. The same <code>refund_id</code> cannot be reused.</p><p>Refund transaction is supported only for <code>creditCard()</code> payment method. Banks which support this method are BNI, Mandiri, and CIMB.</p><p>With Refund, refund request is made to Midtrans where Midtrans will then forward it to payment providers. Do note that some payment method only supports refunding via <a href="#direct-refund-a-transaction">Direct Refund method</a> and vice versa.</p><blockquote><p>For more information, please refer to Midtrans Documentation on <a href="https://docs.midtrans.com/reference/refund-transaction" target="_blank" rel="noreferrer">Refund Transaction</a>.</p></blockquote><p>To refund a transaction, you can use <code>refund()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">refunded_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">refund</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">refunded_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">refund</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="direct-refund-a-transaction" tabindex="-1">Direct Refund a Transaction <a class="header-anchor" href="#direct-refund-a-transaction" aria-hidden="true">#</a></h2><p>Unlike the <a href="#refund-a-transaction">Refund Transaction</a>, Direct Refund transaction is triggered to send the refund request directly to the bank or to the third-party payment provider for transaction with payment status Settlement. If payment status is still in either Capture, Pending or Authorize, use the Cancel API instead. This method is faster than the standard operation process which may take one to two days, after the initial refund request. The status of corresponding transaction is updated immediately after receiving refund result from the third-party payment provider. HTTP notification is sent only if the refund is successful. Do note that some payment method only supports refunding via <a href="#refund-a-transaction">Refund method</a>, and vice versa.</p><p>Direct Refund transaction is only supported for GoPay, QRIS, ShopeePay, and Credit Card payment methods. Currently for Credit Card payment method, Midtrans only supports BCA, MAYBANK, and BRI banks.</p><p>For QRIS with acquirers AirPay (Shopee) and ShopeePay, the maximum refund window is 24 hours since the transaction is paid. Refund is not allowed from 11:55 PM to 6:00 AM GMT+7. If you send Direct Refund during this timeframe, the request gets rejected by ShopeePay.</p><blockquote><p>For more information, please refer to Midtrans Documentation on <a href="https://docs.midtrans.com/reference/direct-refund-transaction" target="_blank" rel="noreferrer">Direct Refund Transaction</a>.</p></blockquote><p>To direct refund a transaction, you can use <code>directRefund()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">refunded_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">directRefund</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// or</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">refunded_transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">directRefund</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="get-transaction-status" tabindex="-1">Get Transaction Status <a class="header-anchor" href="#get-transaction-status" aria-hidden="true">#</a></h2><p>To get the transaction status, you can use <code>getStatus()</code> static method. This method receives a <code>MidtransResponse</code> or Order ID or Transaction ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">transaction_status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">getStatus</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">order_id</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>or you can use <code>status()</code> method on Kasir instance with Order ID.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">transaction </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">creditCard</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">CreditCard</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">card_number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_exp_month</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_exp_year</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">card_cvv</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">charge</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">transaction_status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">status</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre></div>`,47),r=[o];function p(l,c,i,d,y,D){return n(),s("div",null,r)}const u=a(t,[["render",p]]);export{h as __pageData,u as default};
