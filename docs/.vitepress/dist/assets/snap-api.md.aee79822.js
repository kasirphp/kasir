import{_ as s,c as a,o as n,b as e}from"./app.5af47248.js";const A=JSON.parse('{"title":"Snap","description":"","frontmatter":{"title":"Snap"},"headers":[{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[]},{"level":2,"title":"Convert from Kasir Instance","slug":"convert-from-kasir-instance","link":"#convert-from-kasir-instance","children":[]},{"level":2,"title":"Snap Redirect","slug":"snap-redirect","link":"#snap-redirect","children":[]},{"level":2,"title":"Snap Pop-up","slug":"snap-pop-up","link":"#snap-pop-up","children":[]},{"level":2,"title":"Configuring Enabled Payment Methods","slug":"configuring-enabled-payment-methods","link":"#configuring-enabled-payment-methods","children":[]},{"level":2,"title":"Configuring Redirect URL After Payment","slug":"configuring-redirect-url-after-payment","link":"#configuring-redirect-url-after-payment","children":[]}],"relativePath":"snap-api.md"}'),l={name:"snap-api.md"},p=e(`<ul><li><a href="#getting-started">Getting Started</a></li><li><a href="#convert-from-kasir-instance">Convert from Kasir Instance</a></li><li><a href="#snap-redirect">Snap Redirect</a></li><li><a href="#snap-pop-up">Snap Pop-up</a></li><li><a href="#configuring-enabled-payment-methods">Configuring Enabled Payment Methods</a></li><li><a href="#configuring-redirect-url-after-payment">Configuring Redirect URL After Payment</a></li></ul><h2 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h2><p>Snap is a pre-built interface offered by Midtrans to start accepting payment easily. Snap can be displayed as a pop-up within your app or as a web page redirect URL hosted by Midtrans.</p><img width="210" align="center" alt="Midtrans Snap Pop-up" src="https://user-images.githubusercontent.com/36572342/212890194-36435c27-bd56-4f27-9dea-1e8812ff9ce7.png"><blockquote><p>Before you start using this API, you may also need to configure the <a href="./transaction-details.html">Transaction Details</a>.</p></blockquote><h2 id="convert-from-kasir-instance" tabindex="-1">Convert from Kasir Instance <a class="header-anchor" href="#convert-from-kasir-instance" aria-hidden="true">#</a></h2><p>If you already have a Kasir instance, you can convert it to Snap instance by calling <code>snap()</code> method.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight has-focused-lines" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// use \\Kasir\\Kasir\\Kasir;</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Snap</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">billingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">billing_address</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">shippingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">shipping_address</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#676E95;font-style:italic;">// is equal to </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">billingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">billing_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">shippingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">shipping_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">snap</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p><code>$snap</code> is now a <code>Snap</code> instance. You can use it to generate Snap redirect URL or Snap pop-up.</p><h2 id="snap-redirect" tabindex="-1">Snap Redirect <a class="header-anchor" href="#snap-redirect" aria-hidden="true">#</a></h2><p>To use Snap Redirect, you can use <code>Snap</code> class that comes with Kasir. Create a <code>Snap</code> class with the transaction details, and call the <code>redirect()</code> method.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight has-focused-lines" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// use Kasir\\Kasir\\Snap;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Snap</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">grossAmount</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">20000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">billingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">billing_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">shippingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">shipping_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line has-focus"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">redirect</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p>Or from a Kasir instance.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight has-focused-lines" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Kasir</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">grossAmount</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">20000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">billingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">billing_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">shippingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">shipping_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line has-focus"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">kasir</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">snap</span><span style="color:#89DDFF;">()-&gt;</span><span style="color:#82AAFF;">redirect</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p>This method will request Midtrans for a redirect URL and automatically redirect your page to Midtrans&#39; hosted Snap page. After the payment is successful, you can redirect the Snap page back to your application back. Read <a href="#configuring-redirect-url-after-payment">Configuring Redirect URL After Payment</a>.</p><h2 id="snap-pop-up" tabindex="-1">Snap Pop-up <a class="header-anchor" href="#snap-pop-up" aria-hidden="true">#</a></h2><p>To use Snap Pop-up, create a <code>Snap</code> class with the transaction details.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Snap</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">billingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">billing_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">shippingAddress</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">shipping_address</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>Then, call the <code>getToken()</code> method to get the Snap token and pass it to your view.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">token </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">snap</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">getToken</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">checkout</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">compact</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span></code></pre></div><p>This method will request Midtrans for a Snap token.</p><p>Create a button in your view and add some ID to your button element. Then, include <code>&lt;x-kasir::snap-script /&gt;</code> blade component in your view, and pass the Snap token and button ID to the component.</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- This is the Snap pop-up button. --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pay-button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Pay!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- This is the Snap pop-up script. --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">x-kasir::snap-script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pay-button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:token</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">{{</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">$token</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">}}</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"></span></code></pre></div><p>After the payment is successful, you can redirect the Snap page back to your application back. Read <a href="#configuring-redirect-url-after-payment">Configuring Redirect URL After Payment</a>.</p><h2 id="configuring-enabled-payment-methods" tabindex="-1">Configuring Enabled Payment Methods <a class="header-anchor" href="#configuring-enabled-payment-methods" aria-hidden="true">#</a></h2><p>By default, Midtrans allows all payment methods to be used in payments. However, you can specify the accepted payment methods using the <code>enablePayments()</code> method. This method accepts an array of strings defining what the accepted payment methods are.</p><p>The following example will enable only &#39;shopeepay&#39; and &#39;bca_va&#39; as the API&#39;s accepted payment methods:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">Snap</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">enablePayments</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">shopeepay</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bca_va</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]);</span></span>
<span class="line"></span></code></pre></div><p>You can also disable some payment methods using the disablePayment() method, which will prevent the API from making payment requests using the defined payment methods.</p><p>The following example will disable only &#39;credit_card&#39; from the APIs accepted payment methods.</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">Snap</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">make</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">itemDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">items</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">customerDetails</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">disablePayments</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">credit_card</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]);</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// This will disable credit card as the payment method.</span></span>
<span class="line"></span></code></pre></div><p>The accepted array values are:</p><ul><li><code>credit_card</code>: Credit Card</li><li><code>cimb_clicks</code>: CIMB Clicks</li><li><code>bca_klikbca</code>: BCA KlikBCA</li><li><code>bca_klikpay</code>: BCA KlikPay</li><li><code>bri_epay</code>: BNI ePay</li><li><code>echannel</code>: Mandiri Virtual Account</li><li><code>permata_va</code>: Permata Virtual Account</li><li><code>bca_va</code>: BCA Virtual Account</li><li><code>bni_va</code>: BNI Virtual Account</li><li><code>bri_va</code>: BRI Virtual Account</li><li><code>danamon_online</code>: Danamon Online</li><li><code>uob_ezpay</code>: UOB EZ Pay</li><li><code>gopay</code>: GoPay</li><li><code>shopeepay</code>: ShopeePay</li><li><code>indomaret</code>: Indomaret</li><li><code>alfamart</code>: Alfamart</li><li><code>akulaku</code>: Akulaku</li><li><code>kredivo</code>: Kredivo</li></ul><h2 id="configuring-redirect-url-after-payment" tabindex="-1">Configuring Redirect URL After Payment <a class="header-anchor" href="#configuring-redirect-url-after-payment" aria-hidden="true">#</a></h2><p>Please refer to this Midtrans documentation: <a href="https://docs.midtrans.com/docs/snap-advanced-feature#configuring-redirect-url" target="_blank" rel="noreferrer">https://docs.midtrans.com/docs/snap-advanced-feature#configuring-redirect-url</a></p>`,35),o=[p];function t(c,r,i,D,y,F){return n(),a("div",null,o)}const C=s(l,[["render",t]]);export{A as __pageData,C as default};
